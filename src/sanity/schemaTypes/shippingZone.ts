import { defineField, defineType } from 'sanity'
import { TfiTruck, TfiWorld, TfiNotepad } from 'react-icons/tfi'

// --- DE VOLLEDIGE WERELDLIJST ---
const allCountries = [
  { title: 'ðŸ‡¦ðŸ‡« Afghanistan', value: 'AF' },
  { title: 'ðŸ‡¦ðŸ‡± Albania', value: 'AL' },
  { title: 'ðŸ‡©ðŸ‡¿ Algeria', value: 'DZ' },
  { title: 'ðŸ‡¦ðŸ‡© Andorra', value: 'AD' },
  { title: 'ðŸ‡¦ðŸ‡´ Angola', value: 'AO' },
  { title: 'ðŸ‡¦ðŸ‡· Argentina', value: 'AR' },
  { title: 'ðŸ‡¦ðŸ‡² Armenia', value: 'AM' },
  { title: 'ðŸ‡¦ðŸ‡º Australia', value: 'AU' },
  { title: 'ðŸ‡¦ðŸ‡¹ Austria', value: 'AT' },
  { title: 'ðŸ‡¦ðŸ‡¿ Azerbaijan', value: 'AZ' },
  { title: 'ðŸ‡§ðŸ‡¸ Bahamas', value: 'BS' },
  { title: 'ðŸ‡§ðŸ‡­ Bahrain', value: 'BH' },
  { title: 'ðŸ‡§ðŸ‡© Bangladesh', value: 'BD' },
  { title: 'ðŸ‡§ðŸ‡§ Barbados', value: 'BB' },
  { title: 'ðŸ‡§ðŸ‡¾ Belarus', value: 'BY' },
  { title: 'ðŸ‡§ðŸ‡ª Belgium', value: 'BE' },
  { title: 'ðŸ‡§ðŸ‡¿ Belize', value: 'BZ' },
  { title: 'ðŸ‡§ðŸ‡¯ Benin', value: 'BJ' },
  { title: 'ðŸ‡§ðŸ‡¹ Bhutan', value: 'BT' },
  { title: 'ðŸ‡§ðŸ‡´ Bolivia', value: 'BO' },
  { title: 'ðŸ‡§ðŸ‡¦ Bosnia and Herzegovina', value: 'BA' },
  { title: 'ðŸ‡§ðŸ‡¼ Botswana', value: 'BW' },
  { title: 'ðŸ‡§ðŸ‡· Brazil', value: 'BR' },
  { title: 'ðŸ‡§ðŸ‡³ Brunei Darussalam', value: 'BN' },
  { title: 'ðŸ‡§ðŸ‡¬ Bulgaria', value: 'BG' },
  { title: 'ðŸ‡§ðŸ‡« Burkina Faso', value: 'BF' },
  { title: 'ðŸ‡§ðŸ‡® Burundi', value: 'BI' },
  { title: 'ðŸ‡°ðŸ‡­ Cambodia', value: 'KH' },
  { title: 'ðŸ‡¨ðŸ‡² Cameroon', value: 'CM' },
  { title: 'ðŸ‡¨ðŸ‡¦ Canada', value: 'CA' },
  { title: 'ðŸ‡¨ðŸ‡» Cape Verde', value: 'CV' },
  { title: 'ðŸ‡¨ðŸ‡« Central African Republic', value: 'CF' },
  { title: 'ðŸ‡¹ðŸ‡© Chad', value: 'TD' },
  { title: 'ðŸ‡¨ðŸ‡± Chile', value: 'CL' },
  { title: 'ðŸ‡¨ðŸ‡³ China', value: 'CN' },
  { title: 'ðŸ‡¨ðŸ‡´ Colombia', value: 'CO' },
  { title: 'ðŸ‡°ðŸ‡² Comoros', value: 'KM' },
  { title: 'ðŸ‡¨ðŸ‡¬ Congo', value: 'CG' },
  { title: 'ðŸ‡¨ðŸ‡· Costa Rica', value: 'CR' },
  { title: 'ðŸ‡­ðŸ‡· Croatia', value: 'HR' },
  { title: 'ðŸ‡¨ðŸ‡º Cuba', value: 'CU' },
  { title: 'ðŸ‡¨ðŸ‡¾ Cyprus', value: 'CY' },
  { title: 'ðŸ‡¨ðŸ‡¿ Czech Republic', value: 'CZ' },
  { title: 'ðŸ‡©ðŸ‡° Denmark', value: 'DK' },
  { title: 'ðŸ‡©ðŸ‡¯ Djibouti', value: 'DJ' },
  { title: 'ðŸ‡©ðŸ‡² Dominica', value: 'DM' },
  { title: 'ðŸ‡©ðŸ‡´ Dominican Republic', value: 'DO' },
  { title: 'ðŸ‡ªðŸ‡¨ Ecuador', value: 'EC' },
  { title: 'ðŸ‡ªðŸ‡¬ Egypt', value: 'EG' },
  { title: 'ðŸ‡¸ðŸ‡» El Salvador', value: 'SV' },
  { title: 'ðŸ‡¬ðŸ‡¶ Equatorial Guinea', value: 'GQ' },
  { title: 'ðŸ‡ªðŸ‡· Eritrea', value: 'ER' },
  { title: 'ðŸ‡ªðŸ‡ª Estonia', value: 'EE' },
  { title: 'ðŸ‡ªðŸ‡¹ Ethiopia', value: 'ET' },
  { title: 'ðŸ‡«ðŸ‡¯ Fiji', value: 'FJ' },
  { title: 'ðŸ‡«ðŸ‡® Finland', value: 'FI' },
  { title: 'ðŸ‡«ðŸ‡· France', value: 'FR' },
  { title: 'ðŸ‡¬ðŸ‡¦ Gabon', value: 'GA' },
  { title: 'ðŸ‡¬ðŸ‡² Gambia', value: 'GM' },
  { title: 'ðŸ‡¬ðŸ‡ª Georgia', value: 'GE' },
  { title: 'ðŸ‡©ðŸ‡ª Germany', value: 'DE' },
  { title: 'ðŸ‡¬ðŸ‡­ Ghana', value: 'GH' },
  { title: 'ðŸ‡¬ðŸ‡· Greece', value: 'GR' },
  { title: 'ðŸ‡¬ðŸ‡© Grenada', value: 'GD' },
  { title: 'ðŸ‡¬ðŸ‡¹ Guatemala', value: 'GT' },
  { title: 'ðŸ‡¬ðŸ‡³ Guinea', value: 'GN' },
  { title: 'ðŸ‡¬ðŸ‡¼ Guinea-Bissau', value: 'GW' },
  { title: 'ðŸ‡¬ðŸ‡¾ Guyana', value: 'GY' },
  { title: 'ðŸ‡­ðŸ‡¹ Haiti', value: 'HT' },
  { title: 'ðŸ‡­ðŸ‡³ Honduras', value: 'HN' },
  { title: 'ðŸ‡­ðŸ‡° Hong Kong', value: 'HK' },
  { title: 'ðŸ‡­ðŸ‡º Hungary', value: 'HU' },
  { title: 'ðŸ‡®ðŸ‡¸ Iceland', value: 'IS' },
  { title: 'ðŸ‡®ðŸ‡³ India', value: 'IN' },
  { title: 'ðŸ‡®ðŸ‡© Indonesia', value: 'ID' },
  { title: 'ðŸ‡®ðŸ‡· Iran', value: 'IR' },
  { title: 'ðŸ‡®ðŸ‡¶ Iraq', value: 'IQ' },
  { title: 'ðŸ‡®ðŸ‡ª Ireland', value: 'IE' },
  { title: 'ðŸ‡®ðŸ‡± Israel', value: 'IL' },
  { title: 'ðŸ‡®ðŸ‡¹ Italy', value: 'IT' },
  { title: 'ðŸ‡¯ðŸ‡² Jamaica', value: 'JM' },
  { title: 'ðŸ‡¯ðŸ‡µ Japan', value: 'JP' },
  { title: 'ðŸ‡¯ðŸ‡´ Jordan', value: 'JO' },
  { title: 'ðŸ‡°ðŸ‡¿ Kazakhstan', value: 'KZ' },
  { title: 'ðŸ‡°ðŸ‡ª Kenya', value: 'KE' },
  { title: 'ðŸ‡°ðŸ‡® Kiribati', value: 'KI' },
  { title: 'ðŸ‡°ðŸ‡µ Korea, North', value: 'KP' },
  { title: 'ðŸ‡°ðŸ‡· Korea, South', value: 'KR' },
  { title: 'ðŸ‡°ðŸ‡¼ Kuwait', value: 'KW' },
  { title: 'ðŸ‡°ðŸ‡¬ Kyrgyzstan', value: 'KG' },
  { title: 'ðŸ‡±ðŸ‡¦ Laos', value: 'LA' },
  { title: 'ðŸ‡±ðŸ‡» Latvia', value: 'LV' },
  { title: 'ðŸ‡±ðŸ‡§ Lebanon', value: 'LB' },
  { title: 'ðŸ‡±ðŸ‡¸ Lesotho', value: 'LS' },
  { title: 'ðŸ‡±ðŸ‡· Liberia', value: 'LR' },
  { title: 'ðŸ‡±ðŸ‡¾ Libya', value: 'LY' },
  { title: 'ðŸ‡±ðŸ‡® Liechtenstein', value: 'LI' },
  { title: 'ðŸ‡±ðŸ‡¹ Lithuania', value: 'LT' },
  { title: 'ðŸ‡±ðŸ‡º Luxembourg', value: 'LU' },
  { title: 'ðŸ‡²ðŸ‡´ Macao', value: 'MO' },
  { title: 'ðŸ‡²ðŸ‡° Macedonia', value: 'MK' },
  { title: 'ðŸ‡²ðŸ‡¬ Madagascar', value: 'MG' },
  { title: 'ðŸ‡²ðŸ‡¼ Malawi', value: 'MW' },
  { title: 'ðŸ‡²ðŸ‡¾ Malaysia', value: 'MY' },
  { title: 'ðŸ‡²ðŸ‡» Maldives', value: 'MV' },
  { title: 'ðŸ‡²ðŸ‡± Mali', value: 'ML' },
  { title: 'ðŸ‡²ðŸ‡¹ Malta', value: 'MT' },
  { title: 'ðŸ‡²ðŸ‡­ Marshall Islands', value: 'MH' },
  { title: 'ðŸ‡²ðŸ‡· Mauritania', value: 'MR' },
  { title: 'ðŸ‡²ðŸ‡º Mauritius', value: 'MU' },
  { title: 'ðŸ‡²ðŸ‡½ Mexico', value: 'MX' },
  { title: 'ðŸ‡«ðŸ‡² Micronesia', value: 'FM' },
  { title: 'ðŸ‡²ðŸ‡© Moldova', value: 'MD' },
  { title: 'ðŸ‡²ðŸ‡¨ Monaco', value: 'MC' },
  { title: 'ðŸ‡²ðŸ‡³ Mongolia', value: 'MN' },
  { title: 'ðŸ‡²ðŸ‡ª Montenegro', value: 'ME' },
  { title: 'ðŸ‡²ðŸ‡¦ Morocco', value: 'MA' },
  { title: 'ðŸ‡²ðŸ‡¿ Mozambique', value: 'MZ' },
  { title: 'ðŸ‡²ðŸ‡² Myanmar', value: 'MM' },
  { title: 'ðŸ‡³ðŸ‡¦ Namibia', value: 'NA' },
  { title: 'ðŸ‡³ðŸ‡· Nauru', value: 'NR' },
  { title: 'ðŸ‡³ðŸ‡µ Nepal', value: 'NP' },
  { title: 'ðŸ‡³ðŸ‡± Netherlands', value: 'NL' },
  { title: 'ðŸ‡³ðŸ‡¿ New Zealand', value: 'NZ' },
  { title: 'ðŸ‡³ðŸ‡® Nicaragua', value: 'NI' },
  { title: 'ðŸ‡³ðŸ‡ª Niger', value: 'NE' },
  { title: 'ðŸ‡³ðŸ‡¬ Nigeria', value: 'NG' },
  { title: 'ðŸ‡³ðŸ‡´ Norway', value: 'NO' },
  { title: 'ðŸ‡´ðŸ‡² Oman', value: 'OM' },
  { title: 'ðŸ‡µðŸ‡° Pakistan', value: 'PK' },
  { title: 'ðŸ‡µðŸ‡¼ Palau', value: 'PW' },
  { title: 'ðŸ‡µðŸ‡¦ Panama', value: 'PA' },
  { title: 'ðŸ‡µðŸ‡¬ Papua New Guinea', value: 'PG' },
  { title: 'ðŸ‡µðŸ‡¾ Paraguay', value: 'PY' },
  { title: 'ðŸ‡µðŸ‡ª Peru', value: 'PE' },
  { title: 'ðŸ‡µðŸ‡­ Philippines', value: 'PH' },
  { title: 'ðŸ‡µðŸ‡± Poland', value: 'PL' },
  { title: 'ðŸ‡µðŸ‡¹ Portugal', value: 'PT' },
  { title: 'ðŸ‡¶ðŸ‡¦ Qatar', value: 'QA' },
  { title: 'ðŸ‡·ðŸ‡´ Romania', value: 'RO' },
  { title: 'ðŸ‡·ðŸ‡º Russian Federation', value: 'RU' },
  { title: 'ðŸ‡·ðŸ‡¼ Rwanda', value: 'RW' },
  { title: 'ðŸ‡°ðŸ‡³ Saint Kitts and Nevis', value: 'KN' },
  { title: 'ðŸ‡±ðŸ‡¨ Saint Lucia', value: 'LC' },
  { title: 'ðŸ‡»ðŸ‡¨ Saint Vincent and the Grenadines', value: 'VC' },
  { title: 'ðŸ‡¼ðŸ‡¸ Samoa', value: 'WS' },
  { title: 'ðŸ‡¸ðŸ‡² San Marino', value: 'SM' },
  { title: 'ðŸ‡¸ðŸ‡¹ Sao Tome and Principe', value: 'ST' },
  { title: 'ðŸ‡¸ðŸ‡¦ Saudi Arabia', value: 'SA' },
  { title: 'ðŸ‡¸ðŸ‡³ Senegal', value: 'SN' },
  { title: 'ðŸ‡·ðŸ‡¸ Serbia', value: 'RS' },
  { title: 'ðŸ‡¸ðŸ‡¨ Seychelles', value: 'SC' },
  { title: 'ðŸ‡¸ðŸ‡± Sierra Leone', value: 'SL' },
  { title: 'ðŸ‡¸ðŸ‡¬ Singapore', value: 'SG' },
  { title: 'ðŸ‡¸ðŸ‡° Slovakia', value: 'SK' },
  { title: 'ðŸ‡¸ðŸ‡® Slovenia', value: 'SI' },
  { title: 'ðŸ‡¸ðŸ‡§ Solomon Islands', value: 'SB' },
  { title: 'ðŸ‡¸ðŸ‡´ Somalia', value: 'SO' },
  { title: 'ðŸ‡¿ðŸ‡¦ South Africa', value: 'ZA' },
  { title: 'ðŸ‡ªðŸ‡¸ Spain', value: 'ES' },
  { title: 'ðŸ‡±ðŸ‡° Sri Lanka', value: 'LK' },
  { title: 'ðŸ‡¸ðŸ‡© Sudan', value: 'SD' },
  { title: 'ðŸ‡¸ðŸ‡· Suriname', value: 'SR' },
  { title: 'ðŸ‡¸ðŸ‡¿ Swaziland', value: 'SZ' },
  { title: 'ðŸ‡¸ðŸ‡ª Sweden', value: 'SE' },
  { title: 'ðŸ‡¨ðŸ‡­ Switzerland', value: 'CH' },
  { title: 'ðŸ‡¸ðŸ‡¾ Syria', value: 'SY' },
  { title: 'ðŸ‡¹ðŸ‡¼ Taiwan', value: 'TW' },
  { title: 'ðŸ‡¹ðŸ‡¯ Tajikistan', value: 'TJ' },
  { title: 'ðŸ‡¹ðŸ‡¿ Tanzania', value: 'TZ' },
  { title: 'ðŸ‡¹ðŸ‡­ Thailand', value: 'TH' },
  { title: 'ðŸ‡¹ðŸ‡± Timor-Leste', value: 'TL' },
  { title: 'ðŸ‡¹ðŸ‡¬ Togo', value: 'TG' },
  { title: 'ðŸ‡¹ðŸ‡´ Tonga', value: 'TO' },
  { title: 'ðŸ‡¹ðŸ‡¹ Trinidad and Tobago', value: 'TT' },
  { title: 'ðŸ‡¹ðŸ‡³ Tunisia', value: 'TN' },
  { title: 'ðŸ‡¹ðŸ‡· Turkey', value: 'TR' },
  { title: 'ðŸ‡¹ðŸ‡² Turkmenistan', value: 'TM' },
  { title: 'ðŸ‡¹ðŸ‡» Tuvalu', value: 'TV' },
  { title: 'ðŸ‡ºðŸ‡¬ Uganda', value: 'UG' },
  { title: 'ðŸ‡ºðŸ‡¦ Ukraine', value: 'UA' },
  { title: 'ðŸ‡¦ðŸ‡ª United Arab Emirates', value: 'AE' },
  { title: 'ðŸ‡¬ðŸ‡§ United Kingdom', value: 'GB' },
  { title: 'ðŸ‡ºðŸ‡¸ United States', value: 'US' },
  { title: 'ðŸ‡ºðŸ‡¾ Uruguay', value: 'UY' },
  { title: 'ðŸ‡ºðŸ‡¿ Uzbekistan', value: 'UZ' },
  { title: 'ðŸ‡»ðŸ‡º Vanuatu', value: 'VU' },
  { title: 'ðŸ‡»ðŸ‡¦ Vatican City', value: 'VA' },
  { title: 'ðŸ‡»ðŸ‡ª Venezuela', value: 'VE' },
  { title: 'ðŸ‡»ðŸ‡³ Vietnam', value: 'VN' },
  { title: 'ðŸ‡¾ðŸ‡ª Yemen', value: 'YE' },
  { title: 'ðŸ‡¿ðŸ‡² Zambia', value: 'ZM' },
  { title: 'ðŸ‡¿ðŸ‡¼ Zimbabwe', value: 'ZW' },
]

export const shippingZone = defineType({
  name: 'shippingZone',
  title: 'Shipping Zones',
  type: 'document',
  icon: TfiTruck,
  fields: [
    // --- 1. ZONE DEFINITIE ---
    defineField({
      name: 'name',
      title: 'Zone Name',
      description: 'E.g. "Netherlands", "EU Zone 1", "North America"',
      type: 'string',
      validation: (Rule) => Rule.required(),
    }),

    defineField({
      name: 'isGlobalFallback',
      title: 'Is "Rest of World" / Global Fallback?',
      description: 'Check this box to apply these rates to ALL countries NOT listed in other zones.',
      type: 'boolean',
      initialValue: false,
    }),
    
    // HIER IS DE LIJST NU GEKOPPELD
    defineField({
      name: 'countries',
      title: 'Countries in this Zone',
      description: 'Search and select countries from the list.',
      type: 'array',
      of: [{ type: 'string' }],
      options: {
        list: allCountries, // <--- De grote lijst van hierboven
        layout: 'tags'      // Zorgt voor mooie labels die je kunt aanklikken
      },
      hidden: ({ document }) => document?.isGlobalFallback === true,
    }),

    // --- 2. CONTRACT INFO ---
    defineField({
        name: 'logisticsInfo',
        title: 'Internal Logistics Info',
        type: 'object',
        icon: TfiNotepad,
        options: { collapsible: true, collapsed: true }, 
        fields: [
            defineField({
                name: 'courier',
                title: 'Primary Courier',
                type: 'string',
                options: {
                    list: ['PostNL', 'DHL Express', 'FedEx', 'UPS', 'Art Courier', 'Other']
                }
            }),
            defineField({
                name: 'contractNote',
                title: 'Contract / Update Note',
                description: 'E.g. "Prices per Jan 2026 (DHL Contract #1234)"',
                type: 'string',
            })
        ]
    }),

    // --- 3. DE TARIEVEN ---
    defineField({
      name: 'rates',
      title: 'Shipping Rates (EUR)',
      description: 'Vul hier de actuele prijzen in. Gebruik de tabel hieronder als spiekbriefje.',
      type: 'object',
      options: { collapsible: false },
      fields: [
        defineField({ 
            name: 'mailbox', 
            title: 'âœ‰ï¸ Brievenbuspakket (â‰¤ 3.8cm)', 
            description: 'Richtprijs: NL ~â‚¬4 | EU ~â‚¬10 | World ~â‚¬25',
            type: 'number', 
            validation: (Rule) => Rule.required().min(0)
        }),
        defineField({ 
            name: 'parcel_standard', 
            title: 'ðŸ“¦ Standard Parcel (approx 45x60cm)', 
            description: 'Richtprijs: NL ~â‚¬15 | EU ~â‚¬30 | World ~â‚¬80',
            type: 'number', 
            validation: (Rule) => Rule.required().min(0)
        }),
        defineField({ 
            name: 'parcel_large', 
            title: 'ðŸ“¦ Large Parcel (approx 90x120cm)', 
            description: 'Richtprijs: NL ~â‚¬40 | EU ~â‚¬90 | World ~â‚¬200',
            type: 'number', 
            validation: (Rule) => Rule.required().min(0)
        }),
        defineField({ 
            name: 'freight', 
            title: 'ðŸšš Crated Freight (Oversized/Pallet)', 
            description: 'Richtprijs: NL ~â‚¬250 | EU ~â‚¬400 | World ~â‚¬500+',
            type: 'number', 
            validation: (Rule) => Rule.required().min(0)
        }),
      ]
    }),
  ],
  preview: {
    select: {
      title: 'name',
      countries: 'countries',
      isGlobal: 'isGlobalFallback',
      courier: 'logisticsInfo.courier'
    },
    prepare({ title, countries, isGlobal, courier }) {
      if (isGlobal) {
        return {
            title: `ðŸŒ ${title} (Global Fallback)`,
            subtitle: courier ? `Via ${courier}` : 'Standard rates',
            media: TfiWorld
        }
      }

      const count = countries ? countries.length : 0;
      const subtitle = count > 0 
        ? `${count} countries (${courier || 'No courier'})` 
        : 'No countries assigned';
      
      return {
        title: title,
        subtitle: subtitle,
        media: TfiTruck
      }
    }
  }
})
